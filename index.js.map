{"version":3,"file":"index.js","sources":["../src/js/showMessage.js","../src/js/refs.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/submitHandler.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showMessage(message, color) {\n  iziToast.info({\n    message: `${message}`,\n    position: 'topRight',\n    backgroundColor: `${color}`,\n  });\n}\n","export const refs = {\n  API_KEY: '46342237-7f01d30a27b9cd655db8e01c6',\n  BASE_URL: 'https://pixabay.com/api/?',\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  div: document.createElement('div'),\n\n  message: {\n    info: 'Please enter a value in the search field!',\n    warning:\n      'Sorry, there are no images matching your search query. Please try again!',\n    error:\n      'Sorry, there are no connection to the server. Please try again later! ',\n    exception:\n      'Exception: We have some issue with connection. Please try again later! ',\n  },\n\n  color: {\n    blue: '#abd4f8',\n    red: '#e97782',\n  },\n};\n","import { showMessage } from './showMessage';\n\nimport { refs } from './refs';\n\nconst options = {\n  method: 'GET',\n};\n\nexport async function getGalleryData(queryValue) {\n  try {\n    const searchParams = new URLSearchParams({\n      key: refs.API_KEY,\n      q: queryValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    });\n\n    const response = await fetch(refs.BASE_URL + searchParams, options).then();\n    if (!response.ok) {\n      showMessage(refs.message.error, refs.color.orange);\n      return;\n    }\n    return await response.json();\n  } catch (err) {\n    showMessage(`${refs.message.exception} ERROR:  ${err}`, refs.color.orange);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(data, tagToInsert) {\n  tagToInsert.innerHTML = markup(data);\n\n  lightbox.refresh();\n}\n\nfunction markup(data) {\n  return data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n\t\t\t\t<li class=\"gallery-item hvr-grow\">\n\t\t\t\t\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t\t\t<figure class=\"gallery-figure \">\n\t\t\t\t\t\t\t<img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n\t\t\t\t\t\t\t<figcaption class=\"gallery-figcaption\">\n\t\t\t\t\t\t\t\t<ul class=\"img-content-wrapper\">\n\t\t\t\t\t\t\t\t\t<li>Likes<span>${likes}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Views<span>${views}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Comments<span>${comments}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Downloads<span>${downloads}</span></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\n\nimport { showMessage } from './showMessage';\n\nimport { getGalleryData } from './pixabay-api';\nimport { renderGallery } from './render-functions';\n\nimport { refs } from './refs';\n\nexport async function submitHandler(event) {\n  event.preventDefault();\n\n  iziToast.destroy();\n  refs.gallery.innerHTML = '';\n  addLoader();\n\n  const formData = new FormData(event.target);\n  const { search } = Object.fromEntries(formData.entries());\n\n  if (!search.trim()) {\n    showMessage(refs.message.info, refs.color.blue);\n    refs.gallery.innerHTML = '';\n    return;\n  }\n\n  try {\n    const galleryData = await getGalleryData(search.trim());\n    if (validateGalleryData(galleryData)) {\n      renderGallery(galleryData, refs.gallery);\n    }\n  } catch (error) {\n    showMessage(refs.message.exception + error, refs.color.red);\n    refs.gallery.innerHTML = '';\n  }\n\n  event.target.reset();\n}\n\nfunction addLoader() {\n  refs.div.classList.add('loader');\n  refs.gallery.append(refs.div);\n}\n\nfunction validateGalleryData(galleryData) {\n  if (!galleryData) {\n    refs.gallery.innerHTML = '';\n    return false;\n  } else if (galleryData && galleryData.totalHits === 0) {\n    showMessage(message.warning, color.red);\n    refs.gallery.innerHTML = '';\n    return false;\n  } else {\n    return true;\n  }\n}\n","import { submitHandler } from './js/submitHandler';\nimport { refs } from './js/refs';\n\nrefs.form.addEventListener('submit', submitHandler);\n"],"names":["showMessage","message","color","iziToast","refs","options","getGalleryData","queryValue","searchParams","response","err","lightbox","SimpleLightbox","renderGallery","data","tagToInsert","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","submitHandler","event","addLoader","formData","search","galleryData","validateGalleryData","error"],"mappings":"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"}